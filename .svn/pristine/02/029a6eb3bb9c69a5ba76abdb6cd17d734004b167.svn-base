package com.luer.storemanager.controller;

import com.luer.comm.utils.ResultSet;
import com.luer.servicecenter.bean.CustomerBasic;
import com.luer.servicecenter.dao.CustomerBasicMapper;
import com.luer.servicecenter.service.CustomerBasicService;
import com.luer.storemanager.bean.CheckIn;
import com.luer.storemanager.bean.MotherCheckIn;
import com.luer.storemanager.service.CheckInService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.servlet.ModelAndView;

import java.util.List;

/**
 * 入住控制层
 *
 * @ClassName CheckInController
 * @Author GavinJiang
 * @Date 2018/8/16 17:45.
 */
@Controller
@RequestMapping("/checkIn")
public class CheckInController {
    @Autowired
    private CheckInService checkInService;
    @Autowired
    private CustomerBasicService customerBasicService;

    /**
     * 查询所有的入住信息
     *
     * @return com.luer.comm.utils.ResultSet
     * @author GavinJiang
     * @date 2018/8/16 17:54
     * @params
     */
    @ResponseBody
    @RequestMapping("selectCheckInAll")
    public List<CheckIn> selectCheckInAll(String storeId) {
        List<CheckIn> checkInAll = checkInService.selectAllByStoreid(storeId);
        return checkInAll;
    }
    /**获取所有已经入住妈妈信息
    * @author 张路明
    */
    @ResponseBody
    @RequestMapping("selectMotherCheckIn")
    public List<MotherCheckIn> selectmother(CustomerBasic customerBasic) {
        List<MotherCheckIn> lists = checkInService.selectMotherCheckIn(customerBasic.getStoreId());
        return lists;
    }
    /**根据妈妈id获取审核记录
     * @author 张路明
     */
    @ResponseBody
    @RequestMapping("selectCheckBymother")
    public CheckIn selectCheckBymother(String motherid) {
        return checkInService.selectBymotherid(motherid);
    }
    /**
     * 添加入住信息
     *
     * @param checkIn
     * @return com.luer.comm.utils.ResultSet
     * @author GavinJiang
     * @date 2018/8/16 17:56
     * @params
     */
    @ResponseBody
    @RequestMapping("addCheckIn")
    public ResultSet addCheckIn(CheckIn checkIn) {
        checkInService.insert(checkIn);
        return ResultSet.getSuccess();
    }

    /**
     * 修改入住信息
     *
     * @param checkIn
     * @return com.luer.comm.utils.ResultSet
     * @author GavinJiang
     * @date 2018/8/16 17:56
     * @params
     */
    @ResponseBody
    @RequestMapping("updateCheckIn")
    public ResultSet updateCheckIn(CheckIn checkIn) {
        checkInService.updateByPrimaryKeySelective(checkIn);
        return ResultSet.getSuccess();
    }

    /**
     * 根据id删除入住信息
     *
     * @param id
     * @return com.luer.comm.utils.ResultSet
     * @author GavinJiang
     * @date 2018/8/16 17:57
     * @params
     */
    @ResponseBody
    @RequestMapping("deleteCheckIn")
    public ResultSet deleteCheckIn(String id) {
        checkInService.deleteByPrimaryKey(id);
        return ResultSet.getSuccess();
    }

    /**
     * 根据id删除入住信息
     *
     * @param ids
     * @return com.luer.comm.utils.ResultSet
     * @author GavinJiang
     * @date 2018/8/16 17:57
     * @params
     */
    @ResponseBody
    @RequestMapping("deleteCheckIns")
    public ResultSet deleteCheckIns(String ids) {
        String[] id = ids.split(",");
        for (int i = 0; i < id.length; i++) {
            checkInService.deleteByPrimaryKey(id[i]);
        }
        return ResultSet.getSuccess();
    }

}
