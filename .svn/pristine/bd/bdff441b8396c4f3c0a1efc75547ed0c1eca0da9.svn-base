<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<c:set var="ctx" value="${pageContext.request.contextPath}"/>
<!DOCTYPE html>
<html>
<HEAD>
    <TITLE> 商品分类 </TITLE>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="${ctx}/static/css/zTreeStyle/zTreeStyle.css" type="text/css">
     <script src="${ctx}/static/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="${ctx}/static/js/jquery.ztree.all.js"></script>
    <script type="text/javascript" src="${ctx}/static/js/jquery.ztree.exedit.js"></script>

    <!--
      <script type="text/javascript" src="jquery.ztree.excheck.js"></script>
      <script type="text/javascript" src="jquery.ztree.exedit.js"></script>
    -->
    <SCRIPT type="text/javascript" >



        (function($) {

        var zTree;
        var zTreeObj,
            setting = {
                isSimpleData : true,              //数据是否采用简单 Array 格式，默认false
                treeNodeKey : "id",               //在isSimpleData格式下，当前节点id属性
                treeNodeParentKey : "parentId",        //在isSimpleData格式下，当前节点的父节点id属性
                showLine : true,                  //是否显示节点间的连线
                checkable : true                  //每个节点上是否显示 CheckBox
            };
        var  zTreeNodes;



        $(function(){
                $.ajax({
                    async : false,
                    cache:false,
                    type: 'POST',
                    dataType : "json",
                    url: "${ctx}/classify/getHeadClassify",//请求的action路径
                    error: function () {//请求失败处理函数
                        alert('请求失败');
                    },
                    success:function(data){ //请求成功后处理函数。
                        alert(data);
                        treeNodes = data;   //把后台封装好的简单Json格式赋给treeNodes
                    }
                });

                zTree = $("#tree").zTree(setting, treeNodes);

            });


        })(jQuery);
    </SCRIPT>
</HEAD>

<BODY>
<ul id="tree" class="ztree" style="width:230px; overflow:auto;"></ul>
</BODY>
</HTML>