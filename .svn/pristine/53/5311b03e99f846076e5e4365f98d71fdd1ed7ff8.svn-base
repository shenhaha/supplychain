<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<c:set var="ctx" value="${pageContext.request.contextPath}"/>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="${ctx}/static/css/bootstrapValidator.css"/>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="${ctx}/static/js/bootstrapValidator.js"></script>
    <%--日期时间插件--%>
    <script src="${ctx}/static/js/bootstrap-datetimepicker.js"></script>
    <script src="${ctx}/static/js/bootstrap-datetimepicker.zh-CN.js"></script>
</head>
<body>

<style>
    #result3 img {
        width: 400px;
        height: 250px;
    }
    .textCss{
        border: 1px #CCCCCC solid;
        border-radius: 5px;
        margin-left: 7px;
        height: 35px;
        width: 200px;
        padding-left: 11px;
    }
    .fileCss{
        margin-left: 7px;
        font-size: 14px;
    }
    .textCss::-webkit-input-placeholder {
        /* placeholder颜色  */
        color: #CCCCCC;
        /* placeholder字体大小  */
        font-size: 16px;
    }
    .tableCss tr td{
        height: 50px;
    }
</style>
<form class="form-horizontal" role="form" id="myform" >
    <div class="form-group required" hidden="hidden">
        <label for="id" class="col-sm-2 control-label" style="margin: 0 0;padding: 0 0">ID</label>
        <div class="col-sm-9">
            <input type="text" class="form-control" id="id" name="id" placeholder="id">
        </div>
    </div>
    <div class="container">
        <div class="row">
            <!--前缀-->
            <div class="form-group col-md-5">
                <label for="name" class="col-sm-4 control-label">证书名称：</label>
                <div class="col-sm-5">
                    <input type="text" class="form-control" id="name" name="name" placeholder="name" >
                </div>
            </div>
            <div class="form-group col-md-5">
                <label for="cardid" class="col-sm-4 control-label">证件号：</label>
                <div class="col-sm-5">
                    <input type="text" class="form-control" id="cardid" name="cardid" placeholder="cardid">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-5 col-lg-offset-1">
                <label for="uptime" class="col-md-4 control-label">上传时间:</label>
                <div style="padding-left: 7.5px;padding-right: 7.5px"
                     class="input-group date form_datetime col-md-6" data-date=""  data-date-format="yyyy-mm-dd hh:ii:ss"                     >
                    <input class="form-control" size="16" type="text" value="" name="uptime" id="uptime"  placeholder="uptime" >
                    <span class="input-group-addon">
                        <span  class="glyphicon glyphicon-th">

                        </span>
                    </span>
                </div>
            </div>
            <div class="form-group col-md-5 col-lg-offset-1">
                <label for="address" class="col-md-4 control-label">证件图片:</label>
                <input id="address"  type="file" name='file' accept="image/*" onchange="selectFile()"/>
            </div>
        </div>
        <div class="row" >
            <div class="col-md-5">
                <label for="address" class="control-label">证件预览:</label>
                <div id="result3"   name="image" class="two">
                    <img>
                </div>
            </div>
        </div>
    </div>
</form>
<script>
    $('.form_datetime').datetimepicker({
        language: 'zh-CN',
        weekStart: 1,
        todayBtn: 1,
        autoclose: 1,
        todayHighlight: 1,
        startView: 2,
        forceParse: 0,
        showMeridian: 1
    });
    function selectFile() {
        var files = document.getElementById('address').files;
        console.log(files[0]);
        if (files.length == 0) {
            return;
        }

        var file = files[0];
        //把上传的图片显示出来
        var reader = new FileReader();
        // 将文件以Data URL形式进行读入页面

        console.log(reader);
        reader.readAsBinaryString(file);
        reader.onload = function (f) {
            var result = document.getElementById("result3");
            var src = "data:" + file.type + ";base64," + window.btoa(this.result);
            result.innerHTML = '<img src ="' + src + '"/>';
        }
        console.log('file', file);
        form.append('file', file);
        console.log(form.get('file'));
    }



</script>
</body>
</html>
